<div
	pw-post
	post-required-fields="['gallery(ids,posts)']"

	art-post

	class="post"
	ng-keypress="keyPress()">

	<!-- LOADING 
	<div ng-show="status=='loading'" class="loading">
		<i class="icon-spinner icon-spin icon-large"></i>
	</div>
	-->

	<div class="media-viewer" window-height="50%" >
	
		<!-- IMAGE -->
		<div
			ng-show="showView('image')"
			class="view-image"
			ng-style="backgroundImage( post.image.sizes.full.url )">
		</div>
		
		<!-- EMBED -->
		<div
			ng-show="showView('embed')"
			class="view-embed"
			o-embed="post.link_url"
			autoplay="true">
			<div class="o-embed" ng-bind-html="post.link_url_embed"></div>
			<!--<div ng-bind="oEmbedCode | json"></div>-->
		</div>

		<!-- INFINITE GALLERY -->
		<!-- Handles the Gallery Data -->
		<div
			ng-show="showView('gallery')"
			pw-infinite-gallery
			gallery-preload="4"
			gallery-scroll="galleryGetNext(3)"
			gallery-scroll-direction="horizontal"
			class="view-gallery-horizontal">
				<!-- INFINITE SCROLL -->
				<div class="infinite-h-scroll" id="scrolls">
					<div
						class="scroll-inner"
						infinite-h-scroll
						scroll-action="galleryGetNext( 2 )"
						scroll-distance="1000"
						scroll-parent>
						<!-- GALLERY IMAGE -->
						<div
							class="gallery-image"
							ng-repeat="galleryPost in galleryDisplayedPosts()">
							<a href="{{galleryPost.post_permalink}}">
								<img ng-src="{{galleryPost.image.sizes.full.url}}">
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- EMBED -->

	</div>
	
	<hr>

	<h2>{{ post.post_title }} // {{ post.ID }} // {{ selectImageTag() }}</h2>

	<hr>

	<div
		ng-show="feed">
		<button ng-click="previousPost()"> ‹‹ Previous </button>
		<button ng-click="nextPost()"> Next ›› </button>
		tag : {{ selectImageTag() }}
	</div>

	<hr>
	POST GALLERY IDS : {{ post.gallery.ids | json }}
	INFINITE GALLERY DISPLAYED : {{ infiniteGallery.displayed | json }}
	<hr>
	<!--
	galleryDisplayedPosts() : {{ galleryDisplayedPosts() }}
	-->
	<!--
	<hr>

	

	<hr>

	FEED : {{ feed | json }}
	-->


	<!-- WRAPPER (Cloak until loaded) -->
	<div
		ng-cloak ng-hide="status=='loading'"
		class="i-transition-fadein wrapper"
		pw-timeout="333"
		timeout-action="addClass('fadein-on')">

			<!-- MEDIA 
			<div
				class="media-embed layer-2"
				ng-class="post.link_format"
				ng-show="post.link_format == 'video' || post.link_format == 'audio'">
				<div
					class="o-embed"
					o-embed="post.link_url"
					autoplay="true"
					run="post.link_format == 'video' || post.link_format == 'audio'">
					<div class="o-embed" ng-bind-html="oEmbed"></div>
				</div>
			</div>
			-->

	</div>
	<!-- END WRAPPER -->
	<!--
	STATUS : {{ status }} <br>
	MODE : {{ mode }} <br>
	POST : <pre>{{ post | json }}</pre>
	<hr>
	<pre>{{ post | json }}</pre>
	-->
	
</div><!-- END CONTROLLER -->
